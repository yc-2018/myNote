## ==12.== Nginx怎么运行多个域名跨域

我想让http://localhost:3000 http://localhost:3001 还有https://yc556.gitee.io/允许跨域怎么改
location /md {
add_header Access-Control-Allow-Origin 'http://localhost:3000';

==（静态页面且不想用*的情况）==

> 要允许跨域请求，你需要在Nginx的配置中为每个需要跨域的源设置`Access-Control-Allow-Origin`头部。由于你想要从三个不同的源（`http://localhost:3000`, `http://localhost:3001`, `https://yc556.gitee.io/`）进行跨域请求，而HTTP头部`Access-Control-Allow-Origin`在一个响应中只能设置一个值，你需要根据请求的来源动态设置这个头部。
> 这里有一个在Nginx中实现这一目的的方法：
>
> 1. **创建一个映射**来根据请求的`Origin`头部动态设置`Access-Control-Allow-Origin`。这个映射可以在Nginx配置的`http`块中定义，这样它就可以被所有的`server`块共享。
> 2. **应用这个映射**到你的`location /md`块中，使用`add_header`指令设置正确的`Access-Control-Allow-Origin`。
>    下面是具体的配置示例：
>
> ```nginx
> http {
>     map $http_origin $allow_origin {
>         default "";
>         "http://localhost:3000"  $http_origin;
>         "http://localhost:3001"  $http_origin;
>         "https://yc556.gitee.io" $http_origin;
>     }
>     server {
>         ...
>         location /md {
>             ...
>             add_header Access-Control-Allow-Origin $allow_origin;
>             ...
>         }
>     }
> }
> ```
>
> 这个配置首先检查请求的`Origin`是否是你指定的三个之一，如果是，则将`Access-Control-Allow-Origin`设置为该`Origin`。这样，只有这三个指定的源可以接收来自`location /md`的跨域请求。
> <kbd>2024.04.06</kbd> <kbd>通用助手4.0</kbd>








