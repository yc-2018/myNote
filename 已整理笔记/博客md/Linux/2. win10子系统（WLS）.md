## ==2.==win10子系统（WLS）

**怎么进去**

> 1. 打开“开始”菜单，然后在搜索框中输入“cmd”或“命令提示符”，按回车键打开命令提示符。
>
> 2. 在命令提示符中输入`wsl`，然后按回车键。这将启动默认的WSL发行版（例如，Ubuntu）。
>
> 3. 您还可以直接从“开始”菜单运行已安装的WSL发行版。只需在“开始”菜单中找到对应的WSL发行版（例如，Ubuntu），点击它以启动终端。
>
> 4. > 如果您想要运行特定的WSL发行版，您可以在命令提示符中输入以下命令，其中`<发行版名称>`是您希望运行的WSL发行版的名称（例如，`Ubuntu-20.04`）：
>    >
>    > ```shell
>    > wsl -d <发行版名称>
>    > ```
>
>    如果您不确定已安装了哪些WSL发行版，可以在命令提示符中输入以下命令查看可用的WSL发行版列表：
>
>    ```shell
>    wsl --list --verbose
>    ```

---



### **忘记root密码**

> 1. 打开Windows命令提示符（cmd）或PowerShell。
>
> 2. 先列出您的WSL发行版，以找到您要重置密码的发行版的名称。在命令提示符或PowerShell中输入以下命令：
>
>    ```shell
>    wsl --list
>    ```
>
>    这将显示您已安装的WSL发行版列表。
>
>
>
> 3. 假设您要重置的发行版名称为`Ubuntu-20.04`（请根据实际情况替换为您的发行版名称），使用以下命令以root用户身份启动WSL发行版：
>
>    ```shell
>    wsl -u root -d Ubuntu-20.04
>    ```
>
>    这将以root权限打开WSL终端。
>
>    > 如果默认发行版是`Ubuntu`
>    >
>    > ```shell
>    > wsl -u root
>    > ```
>
> 4. 现在，您可以使用`passwd`命令重置您的用户密码。将`<your-username>`替换为您的用户名（例如，yc556）：
>
>    ```shell
>    passwd <your-username>
>    ```
>
>    按照提示输入新密码，然后再次输入以确认。
>
>
>
> 5. 完成密码重置后，输入`exit`退出WSL终端。
>
> 现在，您应该已经成功重置了WSL用户密码。尝试使用新密码登录或运行`sudo`命令。



### WSL文件夹移到D盘

（==还没试过==）

> 要将WSL（Windows Subsystem for Linux）的默认安装位置更改为D盘，您需要创建一个符号链接（symlink）来将WSL默认路径重定向到D盘。请遵循以下步骤：
>
> 1. 首先确保WSL未运行。在PowerShell（以管理员身份运行）中输入以下命令停止WSL服务：
>
>    ```
>    wsl --shutdown
>    ```
>
> 2. 接下来，将现有的WSL文件夹移到D盘。在PowerShell中输入以下命令（请根据实际情况替换`<D:\your\desired\path>`）：
>
>    ```
>    Move-Item "$env:USERPROFILE\AppData\Local\Packages" "<D:\your\desired\path>"
>    ```
>
>    例如，如果您希望将文件夹移动到D盘上的`WSL`文件夹中，可以使用以下命令：
>
>    ```
>    Move-Item "$env:USERPROFILE\AppData\Local\Packages" "D:\WSL"
>    ```
>
> 3. 创建一个指向新位置的符号链接。在PowerShell中输入以下命令（请根据实际情况替换`<D:\your\desired\path>`）：
>
>    ```
>    New-Item -ItemType SymbolicLink -Path "$env:USERPROFILE\AppData\Local\Packages" -Target "<D:\your\desired\path>"
>    ```
>
>    例如，如果您将文件夹移动到了D盘上的`WSL`文件夹中，可以使用以下命令：
>
>    ```
>    New-Item -ItemType SymbolicLink -Path "$env:USERPROFILE\AppData\Local\Packages" -Target "D:\WSL"
>    ```
>
> 完成以上步骤后，WSL将使用D盘上的新路径作为默认存储位置。
>
> 请注意，这个方法仅适用于将整个`Packages`文件夹（包括所有WSL发行版）移动到D盘。如果您只想将特定的WSL发行版移动到D盘，可以考虑使用`wsl --export`和`wsl --import`命令。





### 怎么看wsl是1还是2

> 要确定您正在使用的是 WSL 1 还是 WSL 2，您可以在 Windows 命令提示符或 PowerShell 中运行以下命令：
>
> ```bash
> wsl.exe --list --verbose
> ```
>
> 或者使用简写：
>
> ```bash
> wsl -l -v
> ```
>
> 这将显示一个列表，其中包括已安装的 Linux 发行版以及每个发行版所使用的 WSL 版本。输出可能类似于以下内容：
>
> ```
>   NAME                   STATE           VERSION
> * Ubuntu                 Running         2
>   Debian                 Stopped         1
> ```
>
> 在这个示例中，我们可以看到 Ubuntu 发行版正在运行，并使用 WSL 2，而 Debian 发行版已停止，并使用 WSL 1。在您的系统上，版本号可能与此不同。



### wsl 怎么停止

> 在 Windows Subsystem for Linux（WSL）中，你可以使用以下方法来停止 WSL：
>
> 1. **使用命令行停止特定的 WSL 发行版：** 如果你知道要停止的 WSL 发行版的名称，可以使用以下命令来停止它：
>
>     ```bash
>     wsl --terminate <distribution-name>
>     ```
>
>     这里的 `<distribution-name>` 应该被替换为你要停止的 WSL 发行版的名称。例如，如果你要停止名为 "Ubuntu" 的 WSL 发行版，你可以运行以下命令：
>
>     ```bash
>     wsl --terminate Ubuntu
>     ```
>
> 2. **停止所有的 WSL 发行版：** 如果你想要停止所有正在运行的 WSL 发行版，你可以使用以下命令：
>
>     ```bash
>     wsl --shutdown
>     ```
>
>     这个命令会停止所有的 WSL 发行版和 WSL 2 的虚拟机。
>
> 这些命令都应该在 Windows 的命令提示符或 PowerShell 中执行。
>
> 请注意，当你停止一个 WSL 发行版时，所有在该发行版中运行的进程都会被终止，所有未保存的数据都会丢失。因此，你应该在运行这些命令之前保存所有的工作。



### wsl的默认路径

> ```
> %USERPROFILE%\AppData\Local\Packages\虚拟机文名字\LocalState\rootfs\
> ```
>
> 如 Ubuntu20.04LTS
>
> ```
> C:\Users\Administrator\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx
> ```
>
>

### wsl打开非默认

> 用  `wsl -l -v`  参看名字
>
> 再用`wsl -d 虚拟机名字`
>
> 如果有同名也可以用路径 `wsl -d <Path to WSL installation>`
>
> 如 `wsl -d /mnt/<username>/AppData/Local/Packages/CanonicalGroupLimited.Ubuntu20.04onWindows/rootfs`
>
> >要更改默认的Linux发行版，请运行`wslconfig /setdefault Name`命令，这里的`Name`就是虚拟机名字





### wsl删除单个

> 如：WSL中删除CentOS 7
>
> 1. 使用wsl命令列出已安装的所有Linux发行版:`wsl -l`
> 2. 找到CentOS 7对应的名称,比如"CentOS7"
> 3. 使用wsl命令卸载CentOS:`wsl --unregister CentOS7`





### Windows 访问 WSL的root目录

> 非gpt，原文：[Windows 怎样访问 WSL2子系统的root文件夹？](https://www.zhihu.com/question/418396436/answer/2754045936)
>
> ---
>
> 编辑 `/etc/wsl.conf`
>
> ```bash
> vi /etc/wsl.conf
> ```
>
> 在里面添加
>
> ```toml
> [user]
> default=root
> ```
>
>





wsl怎么通过v2ray使用GitHub

> 使用V2Ray (v2ran) 通过WSL（Windows Subsystem for Linux）连接GitHub的过程如下：
> 1. 首先，你需要在Windows系统上安装和配置好V2Ray。这一步通常包括下载和解压V2Ray的最新发布版本，然后根据你的需求修改配置文件。
> 2. 在WSL中，你需要设置代理环境变量。这可以通过在.bashrc或.zshrc文件中添加如下行实现（假设你的V2Ray客户端设置为监听127.0.0.1:1080）：
>     ```bash
>     export http_proxy="http://127.0.0.1:1080"
>     export https_proxy="http://127.0.0.1:1080"
>     ```
>     保存并关闭文件后，执行以下命令使更改生效：
>     ```bash
>     source ~/.bashrc
>     ```
>     或者，如果你使用的是zsh：
>     ```bash
>     source ~/.zshrc
>     ```
> 3. 现在，你的WSL应该已经通过V2Ray代理连接到互联网了。你可以测试这一点，例如，通过尝试克隆GitHub上的一个仓库。如果一切正常，这应该可以工作。
>     请注意，你需要确保你的V2Ray客户端在进行这些步骤时是运行的。此外，如果你的V2Ray客户端监听的地址或端口与上述不同，你需要在配置环境变量时进行相应的调整。
>
> ---
>
> 2023.11.11（gpt4）未验证

​


